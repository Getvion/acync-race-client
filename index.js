(()=>{"use strict";var e={855:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(645),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,"*,*::after,*::before{margin:0;padding:0;box-sizing:border-box}img,svg{width:100%;height:100%}body{padding:0 10px}button{padding:5px 10px;border:1px solid #c1a6a6;border-radius:5px}input{border-radius:5px;border:1px solid #000}.fields{margin:20px 0}.garage h1{margin:10px 0}.garage .page{margin:10px 0}.car-track{border-bottom:2px dashed #000;position:relative}.car{width:100px;height:50px;margin-bottom:-8px;transform:translateX(calc(-100px + 100%))}.finish{right:100px;bottom:-10px;position:absolute;width:50px;height:50px}@keyframes drive{from{transform:translateX(calc(-100px + 100%))}to{transform:translateX(calc(-100px + 98vw))}}.car.drive{animation:drive;animation-timing-function:linear;animation-fill-mode:forwards}",""]);const i=a},997:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(645),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".table{width:100%;border-collapse:collapse;border-spacing:0;height:auto}.table__ceil,.table__header{border:1px solid #595959;text-align:center;min-height:35px;height:35px}.table__header{background-color:#347c99;color:#fff;font-size:18px;font-weight:800}",""]);const i=a},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(r)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(a[o]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&a[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},252:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var r=n(379),a=n.n(r),i=n(855);a()(i.Z,{insert:"head",singleton:!1});const o=i.Z.locals||{}},470:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var r=n(379),a=n.n(r),i=n(997);a()(i.Z,{insert:"head",singleton:!1});const o=i.Z.locals||{}},379:(e,t,n)=>{var r,a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),i=[];function o(e){for(var t=-1,n=0;n<i.length;n++)if(i[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],a=0;a<e.length;a++){var s=e[a],c=t.base?s[0]+t.base:s[0],l=n[c]||0,d="".concat(c," ").concat(l);n[c]=l+1;var u=o(d),g={css:s[1],media:s[2],sourceMap:s[3]};-1!==u?(i[u].references++,i[u].updater(g)):i.push({identifier:d,updater:h(g,t),references:1}),r.push(d)}return r}function c(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=a(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var l,d=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function u(e,t,n,r){var a=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,a);else{var i=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function g(e,t,n){var r=n.css,a=n.media,i=n.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,v=0;function h(e,t){var n,r,a;if(t.singleton){var i=v++;n=p||(p=c(t)),r=u.bind(null,n,i,!1),a=u.bind(null,n,i,!0)}else n=c(t),r=g.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var a=o(n[r]);i[a].references--}for(var c=s(e,t),l=0;l<n.length;l++){var d=o(n[l]);0===i[d].references&&(i[d].updater(),i.splice(d,1))}n=c}}}},847:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.API=void 0,t.API=class{constructor(){this.BASE_URL="http://127.0.0.1:3000"}getCars(e,t=7){return n(this,void 0,void 0,(function*(){const n=yield fetch(`${this.BASE_URL}/garage?_page=${e}&_limit=${t}`);return yield n.json()}))}getCar(e){return n(this,void 0,void 0,(function*(){const t=yield fetch(`${this.BASE_URL}/garage/${e}`);return yield t.json()}))}getAmountCars(){return n(this,void 0,void 0,(function*(){const e=yield fetch(`${this.BASE_URL}/garage`);return(yield Promise.resolve(e.json())).length}))}switchEngineState(e,t){return n(this,void 0,void 0,(function*(){return(yield fetch(`${this.BASE_URL}/engine?id=${e}&status=${t}`,{method:"PATCH"})).json()}))}getWinner(e){return n(this,void 0,void 0,(function*(){return(yield fetch(`${this.BASE_URL}/winners/${e}`)).json()}))}updateWinner(e,t){return n(this,void 0,void 0,(function*(){return(yield fetch(`${this.BASE_URL}/winners/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}))}createWinner(e){return n(this,void 0,void 0,(function*(){return(yield fetch(`${this.BASE_URL}/winners`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json()}))}getWinnersAmount(){return n(this,void 0,void 0,(function*(){const e=yield fetch(`${this.BASE_URL}/winners`);return(yield Promise.resolve(e.json())).length}))}getAllWinners(){return n(this,void 0,void 0,(function*(){const e=yield fetch(`${this.BASE_URL}/winners`);return yield e.json()}))}getWinners(e=1,t=10,r="id",a="ASC"){return n(this,void 0,void 0,(function*(){return(yield fetch(`${this.BASE_URL}/winners?_page=${e}&_limit=${t}&_sort=${r}&_order=${a}`)).json()}))}getWinnersWithCars(e=1,t=10,r="id",a="ASC"){return n(this,void 0,void 0,(function*(){const i=[];return(yield this.getWinners(e,t,r,a)).forEach((e=>n(this,void 0,void 0,(function*(){const t=yield this.getCar(e.id.toString()),n={id:e.id,wins:e.wins,time:e.time,name:t.name,color:t.color};i.push(n)})))),i}))}}},717:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0,n(252),t.App=class{constructor(){this.garagePageCounter=1,this.tracksOnPageAmount=7,this.winnersPageCounter=1,this.winnersOnPageAmount=10,this.sortValue="id",this.sortOrder="ASC",this.selectedCarData={name:"",color:"#000000",id:""},this.createCarData={name:"",color:"#000000"}}get garagePage(){return this.garagePageCounter}set garagePage(e){e<1?alert("page cant be less 1"):this.garagePageCounter=e}get winnersPage(){return this.winnersPageCounter}set winnersPage(e){e<1?alert("page cant be less 1"):this.winnersPageCounter=e}get tracksOnPage(){return this.tracksOnPageAmount}get winnersOnPage(){return this.winnersOnPageAmount}toggleOrder(){"ASC"===this.sortOrder?this.sortOrder="DESC":this.sortOrder="ASC"}get selectedCar(){return this.selectedCarData}set selectedCar(e){this.selectedCarData=e,console.log("changed",this.selectedCarData)}get createdCar(){return this.createCarData}set createdCar(e){this.createCarData=e}}},906:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CarTrack=void 0,t.CarTrack=class{createInputs(){return'\n      <div class="field__create create">\n        <input class="create__input" type="text">\n        <input class="create__input" type="color">\n        <button>create</button>\n      </div>\n      '}updateInputs(){return'\n      <div class="field__update update">\n        <input class="update__input" type="text" disabled>\n        <input class="update__input" type="color" disabled>\n        <button disabled>update</button>\n      </div>\n      '}generateTrackWrapper(e,t){const r=document.createElement("main");r.classList.add("garage"),document.querySelector(".fields").after(r);const a=document.createElement("div"),i=document.createElement("h1");(()=>{n(this,void 0,void 0,(function*(){const t=yield e.getAmountCars();i.innerHTML=`Garage (${t})`}))})(),a.classList.add("trackList");const o=document.createElement("h2");o.innerHTML=`Page <span class="page__number">${t.garagePage}</span>`;const s=document.createElement("div");s.innerHTML='\n        <button disabled class="pagination__prev">prev</button>\n        <button class="pagination__next">next</button>\n        ',s.classList.add("pagination"),r.append(o,i,a,s)}paginationHandler(e,t){const n=document.querySelector(".pagination");null==n||n.addEventListener("click",(n=>{const r=document.querySelector(".pagination__prev"),a=document.querySelector(".pagination__next"),i=n.target;"pagination__prev"!==i.className||r.disabled||(t.garagePage-=1),"pagination__next"!==i.className||a.disabled||(t.garagePage+=1),this.createTrack(e.getCars(t.garagePage)),setTimeout((()=>this.carHandler(e)),100),this.paginationClickableButtons(t,e),this.updatePageNumber(t),document.querySelector(".fields__button-reset").disabled=!0,document.querySelector(".fields__button-start").disabled=!1}))}updatePageNumber(e,t=e.garagePage){document.querySelector(".page__number").innerText=String(t)}paginationClickableButtons(e,t,r=e.garagePage){const a=document.querySelector(".pagination__prev"),i=document.querySelector(".pagination__next");a.disabled=1===r,(()=>{n(this,void 0,void 0,(function*(){const n=yield t.getAmountCars(),r=Math.ceil(n/e.tracksOnPage);r>e.garagePage?i.disabled=!1:i.disabled=!0,r<e.garagePage&&(e.garagePage-=1,this.createTrack(t.getCars(e.garagePage)),this.updatePageNumber(e),setTimeout((()=>this.carHandler(t)),100))}))})()}updateGarageAmount(e){const t=document.querySelector("h1");(()=>{n(this,void 0,void 0,(function*(){const n=yield e.getAmountCars();t.innerHTML=`Garage (${n})`}))})()}markupTrack({name:e,color:t,id:n}){return`\n      <div class="car-track">\n        <h3 class="car__title">${e}</h3>\n        <div class="car__buttons">\n          <button class="car__button car__button-select">select</button>\n          <button class="car__button car__button-remove">remove</button>\n          <button class="button-start">A</button>\n          <button class="button-stop" disabled>B</button>\n        </div>\n        <div class="car" id="${n}">\n            <svg><use xlink:href="./sprite.svg#car" fill="${t}"></use></svg>\n        </div>\n        <div class="finish">\n          <svg><use xlink:href="./sprite.svg#finish"></use></svg>\n        </div>\n      </div>\n      `}createTrack(e){const t=document.querySelector(".trackList");e.then((e=>{const n=e.map((e=>this.markupTrack(e))).join("");t.innerHTML=n}))}deleteCar(e){fetch(`http://127.0.0.1:3000/garage/${e}`,{method:"DELETE"}),fetch(`http://127.0.0.1:3000/winners/${e}`,{method:"DELETE"})}createCar(e,t){fetch("http://127.0.0.1:3000/garage/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,color:t})})}updateCar(e,t,n){fetch(`http://127.0.0.1:3000/garage/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,color:t})})}carHandler(e){document.querySelectorAll(".car-track").forEach((t=>{t.addEventListener("click",(t=>n(this,void 0,void 0,(function*(){var n,r,a;const i=t.target,o=null===(n=i.parentElement)||void 0===n?void 0:n.nextElementSibling,s=o.id,c=null===(r=i.closest(".car-track"))||void 0===r?void 0:r.querySelector(".button-start"),l=null===(a=i.closest(".car-track"))||void 0===a?void 0:a.querySelector(".button-stop");"button-start"===i.className&&this.engineOperation(s,o,e,c,l),"button-stop"===i.className&&(l.disabled=!0,null==o||o.classList.remove("drive"),c.disabled=!1)}))))}))}engineOperation(e,t,r,a,i){return n(this,void 0,void 0,(function*(){a.disabled=!0;const{velocity:n,distance:o}=yield r.switchEngineState(e,"started"),s=(o/n/1e3).toFixed(1);null==t||t.classList.add("drive"),t.style.cssText=`animation-duration: ${s}s;`,i.disabled=!1;try{const{success:t}=yield r.switchEngineState(e,"drive");return{time:s,success:t,id:e}}catch(n){n instanceof Error&&(t.style.animationPlayState="paused",yield r.switchEngineState(e,"stopped"))}}))}}},484:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Control=void 0,t.Control=class{generateControl(e,t){const n=document.querySelector(".app"),r=document.createElement("div");r.classList.add("fields"),n.append(r);const a=[t.createInputs(),t.updateInputs(),e.generateButtons()];r.innerHTML=`${a.map((e=>e)).join("")}`}}},108:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Generate=void 0,t.Generate=class{generateGarage(e,t,n,r,a){e.generateControl(t,n),n.generateTrackWrapper(r,a),n.paginationHandler(r,a),n.paginationClickableButtons(a,r),setTimeout((()=>n.carHandler(r)),100)}generateGarageListeners(e,t,n){const r=document.querySelector(".trackList");null==r||r.addEventListener("click",(r=>{var a,i;const o=r.target;if(o.closest(".car-track")&&o.classList.contains("car__button-remove")||o.classList.contains("car__button-select")){if(o.classList.contains("car__button-remove")){const t=null===(i=null===(a=o.parentElement)||void 0===a?void 0:a.nextElementSibling)||void 0===i?void 0:i.id;e.deleteCar(t)}o.classList.contains("car__button-select")&&this.selectButton(o,t,e,n),setTimeout((()=>{e.createTrack(t.getCars(n.garagePage)),setTimeout((()=>e.carHandler(t)),100),e.updateGarageAmount(t),e.paginationClickableButtons(n,t)}),100)}}));const a=document.querySelector(".field__create.create");null==a||a.addEventListener("click",(r=>{this.createInputListeners(r,e,t,n,a),n.createdCar={name:"",color:""}}));const i=document.querySelector(".create__input[type=text]"),o=document.querySelector(".create__input[type=color]");let s="",c="";i.addEventListener("input",(e=>{const t=e.target.value;s=t,n.createdCar={name:s,color:c}})),o.addEventListener("input",(e=>{const t=e.target.value;c=t,n.createdCar={name:s,color:c}}));const l=document.querySelector(".fields__button-start"),d=document.querySelector(".fields__button-reset");l.addEventListener("click",(()=>{this.startRaceBtnListener(e,t,l,d)})),d.addEventListener("click",(()=>{this.stopRaceBtnListener(e,t,n,l,d)}))}selectButton(e,t,n,r){var a,i;const o=null===(i=null===(a=e.parentElement)||void 0===a?void 0:a.nextElementSibling)||void 0===i?void 0:i.id,s=document.querySelector(".field__update.update"),c=null==s?void 0:s.querySelector("button");null==s||s.childNodes.forEach((e=>{e.disabled=!1}));const l=null==s?void 0:s.querySelector(".update__input[type=text]"),d=null==s?void 0:s.querySelector(".update__input[type=color]");t.getCar(o).then((e=>{l.value=e.name,d.value=e.color,r.selectedCar={name:e.name,color:e.color,id:o}})),null==c||c.addEventListener("click",(()=>{"BUTTON"===e.tagName&&l.value&&d.value&&(n.updateCar(l.value,d.value,o),null==s||s.childNodes.forEach((e=>e.disabled=!0)),l.value="",d.value="#000000",r.selectedCar.name="",r.selectedCar.color="#000000",r.selectedCar.id="",n.createTrack(t.getCars(r.garagePage)),setTimeout((()=>n.carHandler(t)),100))}))}createInputListeners(e,t,n,r,a){if("BUTTON"===(null==e?void 0:e.target).tagName){const e=a.querySelector(".create__input[type=text]").value,i=a.querySelector(".create__input[type=color]").value;e&&i&&(t.createCar(e,i),t.createTrack(n.getCars(r.garagePage)),setTimeout((()=>t.carHandler(n)),100),t.updateGarageAmount(n),t.paginationClickableButtons(r,n)),a.querySelector(".create__input[type=text]").value="",a.querySelector(".create__input[type=color]").value="#000000"}}startRaceBtnListener(e,t,r,a){const i=[];let o=!1;const s=document.querySelectorAll(".car");r.disabled=!0,a.disabled=!1,s.forEach((r=>{var a,s;const c=r,l=c.id,d=null===(a=c.closest(".car-track"))||void 0===a?void 0:a.querySelector(".button-start"),u=null===(s=c.closest(".car-track"))||void 0===s?void 0:s.querySelector(".button-stop");(()=>{n(this,void 0,void 0,(function*(){const n=yield e.engineOperation(l,r,t,d,u);if(n&&(i.push(n),i.length&&!o)){const e=i[0];o=!0;const n=yield t.getAllWinners(),r=(yield t.getCar(e.id)).name;if(alert(`Win ${r} with time ${e.time}`),n.find((t=>Number(t.id)===Number(e.id)))){const n=yield t.getWinner(e.id),r=e.time<n.time?e.time:n.time;t.updateWinner(l,{wins:++n.wins,time:Number(r)})}else t.createWinner({id:Number(e.id),time:Number(e.time),wins:1})}}))})()}))}stopRaceBtnListener(e,t,n,r,a){r.disabled=!1,a.disabled=!0,document.querySelectorAll(".car").forEach((e=>{var n,r;const a=e;t.switchEngineState(a.id,"stopped");const i=null===(n=a.closest(".car-track"))||void 0===n?void 0:n.querySelector(".button-start");(null===(r=a.closest(".car-track"))||void 0===r?void 0:r.querySelector(".button-stop")).disabled=!0,null==a||a.classList.remove("drive"),i.disabled=!1})),e.createTrack(t.getCars(n.garagePage)),setTimeout((()=>e.carHandler(t)),500)}generatePageWinners(e,t){const r=document.querySelector(".app"),a=document.createElement("h1");(()=>{n(this,void 0,void 0,(function*(){const n=yield e.getWinnersAmount();a.innerHTML=`Winners (${n})`;const i=document.createElement("h2");i.innerHTML=`Page <span class="page__number">${t.winnersPage}</span>`,r.prepend(i,a)}))})()}generateWinners(e,t,r,a="id",i="ASC"){return n(this,void 0,void 0,(function*(){const n=yield t.getWinnersWithCars(r.winnersPage,r.winnersOnPage,a,i),o=document.querySelector(".table__body");o.innerHTML="",setTimeout((()=>n.forEach(((t,n)=>null==o?void 0:o.append(e.createTr(t,n,r))))),250)}))}generateWinnersListeners(e,t,n,r){const a=document.querySelector(".pagination");null==a||a.addEventListener("click",(a=>{const i=document.querySelector(".pagination__prev"),o=document.querySelector(".pagination__next"),s=a.target;"pagination__prev"!==s.className||i.disabled||(n.winnersPage-=1),"pagination__next"!==s.className||o.disabled||(n.winnersPage+=1),this.generateWinners(e,t,n,n.sortValue,n.sortOrder),e.isClickablePagination(n,t),r.updatePageNumber(n,n.winnersPage)}))}inputsFiller(e,t,n){var r,a;const i=document.querySelector(".create__input[type=text]"),o=document.querySelector(".create__input[type=color]");let s="",c="#000000";if(""!==e.createdCar.name){const t=e.createdCar.name;i.value=t,s=t}if("#000000"!==e.createdCar.color){const t=e.createdCar.color;o.value=t,c=t}if(e.createdCar={name:s,color:c},""===e.selectedCar.id)return;const l=e.selectedCar.name,d=e.selectedCar.color,u=null===(a=null===(r=document.getElementById(e.selectedCar.id))||void 0===r?void 0:r.parentElement)||void 0===a?void 0:a.querySelector(".car__button-select");this.selectButton(u,t,n,e),setTimeout((()=>{const t=document.querySelector(".update__input[type=text]"),n=document.querySelector(".update__input[type=color]");t.value=l,n.value=d,e.selectedCar={id:e.selectedCar.id,name:l,color:d}}),100)}inputListeners(e){const t=document.querySelector(".field__create .create__input[type=text]");null==t||t.addEventListener("input",(t=>{const n=t.target;e.createdCar.name=n.value}));const n=document.querySelector(".field__create .create__input[type=color]");null==n||n.addEventListener("input",(t=>{const n=t.target;e.createdCar.color=n.value}));const r=document.querySelector(".field__update .update__input[type=color]");null==r||r.addEventListener("input",(t=>{const n=t.target;e.selectedCar={id:e.selectedCar.id,name:e.selectedCar.name,color:n.value}}));const a=document.querySelector(".field__update .update__input[type=text]");null==a||a.addEventListener("input",(t=>{const n=t.target;e.selectedCar={id:e.selectedCar.id,name:n.value,color:e.selectedCar.color}})),r.addEventListener("change",(e=>{const t=e.target;r.value=t.value})),a.addEventListener("change",(e=>{const t=e.target;a.value=t.value}))}}},740:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Winners=t.App=t.API=t.CarTrack=t.Race=t.Control=t.Generate=void 0;var r=n(108);Object.defineProperty(t,"Generate",{enumerable:!0,get:function(){return r.Generate}});var a=n(484);Object.defineProperty(t,"Control",{enumerable:!0,get:function(){return a.Control}});var i=n(289);Object.defineProperty(t,"Race",{enumerable:!0,get:function(){return i.Race}});var o=n(906);Object.defineProperty(t,"CarTrack",{enumerable:!0,get:function(){return o.CarTrack}});var s=n(847);Object.defineProperty(t,"API",{enumerable:!0,get:function(){return s.API}});var c=n(717);Object.defineProperty(t,"App",{enumerable:!0,get:function(){return c.App}});var l=n(287);Object.defineProperty(t,"Winners",{enumerable:!0,get:function(){return l.Winners}})},289:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Race=void 0,t.Race=class{generateButtons(){return'\n        <div class="fields__buttons">\n          <button class="fields__button fields__button-start">Race</button>\n          <button class="fields__button fields__button-reset" disabled>Reset</button>\n          <button class="fields__button fields__button-generate">Generate Cars</button>\n        </div>\n        '}generateCars(e,t=100){const n=["Lada","Toyota","BMW","Mercedes","UAZ","GAZ","Mazda","Shevrole","Audi","Mitsubishi","Jaguar","Izusu","Volvo","Opel","Ford","Nissan","Dodge","Porsche","Haval"],r=["Camry","Supra","A8","A4","S5","M2","M4","Bronco","Focus","Probe","Kuga","Pilot","Accord","Solaris","Elantra","Sonata","Cerato","Rio"];for(let a=0;a<t;a+=1){const t=Math.floor(Math.random()*n.length),a=Math.floor(Math.random()*r.length),i=`${n[t]} ${r[a]}`,o=Math.floor(16777215*Math.random()).toString(16);e.createCar(i,`#${o}`)}}generateRaceListeners(e,t,n){const r=document.querySelector(".fields__button-generate");null==r||r.addEventListener("click",(()=>{this.generateCars(e),e.createTrack(t.getCars(n.garagePage)),e.updateGarageAmount(t),setTimeout((()=>e.carHandler(t)),300),e.paginationClickableButtons(n,t)}))}}},287:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Winners=void 0,n(470),t.Winners=class{createTable(){return'\n    <table class="table">\n      <thead>\n        <tr class="table__header table__row">\n          <th class="table__header">number</th>\n          <th class="table__header">car</th>\n          <th class="table__header">name</th>\n          <th class="table__header">wins</th>\n          <th class="table__header">best time</th>\n        </tr>\n      </thead>\n      <tbody class="table__body">\n\n      </tbody>\n    </table>\n    <div class="pagination">\n      <button disabled class="pagination__prev">prev</button>\n      <button class="pagination__next">next</button>\n    </div>'}createRow(e,t,n){const{color:r,name:a,wins:i,time:o}=e;return`\n      <td class="table__ceil">${n.winnersOnPage*(n.winnersPage-1)+t+1}</td>\n      <td class="table__ceil">\n        <svg><use xlink:href="./sprite.svg#car" fill="${r}"></use></svg>\n      </td>\n      <td class="table__ceil">${a}</td>\n      <td class="table__ceil">${i}</td>\n      <td class="table__ceil">${o}</td>\n    `}createTr(e,t,n){const r=document.createElement("tr");return r.classList.add("table__row"),r.innerHTML=this.createRow(e,t,n),r}isClickablePagination(e,t){const n=document.querySelector(".pagination__prev"),a=document.querySelector(".pagination__next");1===e.winnersPage?n.disabled=!0:n.disabled=!1,(()=>{r(this,void 0,void 0,(function*(){const n=yield t.getWinnersAmount();Math.ceil(n/e.winnersOnPage)>e.winnersPage?a.disabled=!1:a.disabled=!0}))})()}sortListener(e,t,n,r){const a=document.querySelector("thead tr");null==a||a.addEventListener("click",(a=>{const i=a.target;"wins"===i.innerText&&("wins"===e.sortValue?e.toggleOrder():e.sortOrder="ASC",e.sortValue="wins"),"best time"===i.innerText&&("time"===e.sortValue?e.toggleOrder():e.sortOrder="ASC",e.sortValue="time"),"number"===i.innerText&&("id"===e.sortValue?e.toggleOrder():e.sortOrder="ASC",e.sortValue="id"),t.generateWinners(r,n,e,e.sortValue,e.sortOrder)}))}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0,(()=>{const e=n(740),t=new e.App,r=new e.Generate,a=new e.Control,i=new e.Race,o=new e.CarTrack,s=new e.API,c=new e.Winners;document.querySelector("body").innerHTML='<nav class="nav">\n<button class="nav__button nav__button-garage">garage</button>\n<button class="nav__button nav__button-winners">winners</button>\n</nav>\n<div class=\'app\'></div>';const l=document.querySelector(".nav__button-garage"),d=document.querySelector(".nav__button-winners");null==l||l.addEventListener("click",(()=>{document.querySelector(".app").innerHTML="",r.generateGarage(a,i,o,s,t),r.generateGarageListeners(o,s,t),i.generateRaceListeners(o,s,t),o.createTrack(s.getCars(t.garagePage)),l.disabled=!0,d.disabled=!1,setTimeout((()=>{r.inputListeners(t),r.inputsFiller(t,s,o)}),200)})),setTimeout((()=>l.click()),500),d.addEventListener("click",(()=>{l.disabled=!1,d.disabled=!0,document.querySelector(".app").innerHTML="",r.generatePageWinners(s,t),r.generateWinners(c,s,t,t.sortValue,t.sortOrder),document.querySelector(".app").innerHTML=c.createTable(),c.isClickablePagination(t,s),r.generateWinnersListeners(c,s,t,o),c.sortListener(t,r,s,c)}))})()})();